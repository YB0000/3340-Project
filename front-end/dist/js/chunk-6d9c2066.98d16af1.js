(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d9c2066"],{"0c8c":function(t,e,o){},"96a5":function(t,e,o){"use strict";o("fb21")},d2c0:function(t,e,o){"use strict";o.r(e);var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"addBlog"},[o("div",{staticClass:"left",staticStyle:{width:"48%","background-color":"#dad4d4",float:"left"}},[o("blogtitle"),o("blgSection",{ref:"blgSection"})],1),o("div",{staticClass:"reight",staticStyle:{width:"48%","background-color":"#e9eeff",float:"right"}},[t._v(" Preview: "),o("hr"),o("div",[o("div",{staticStyle:{width:"90%","margin-left":"5%","margin-top":"50px",display:"flex","justify-content":"space-around"}},[null!=t.commodity.imgUrl?o("div",{staticClass:"cleft",staticStyle:{width:"250px",height:"250px"}},[o("img",{attrs:{src:t.commodity.imgUrl,alt:"",width:"250px",height:"250px"}})]):t._e(),o("div",{staticClass:"cright",staticStyle:{float:"right"}},[null!=t.commodity.coname?o("h3",[t._v("Product name: "+t._s(t.commodity.coname))]):t._e(),o("p",{staticStyle:{"text-indent":"2em"}},[t._v(" "+t._s(t.commodity.title)+" ")]),null!=t.commodity.productDescription?o("span",[t._v("Description:")]):t._e(),o("div",{staticClass:"productDescription",domProps:{innerHTML:t._s(t.commodity.productDescription)}}),o("div",{},[null!=t.commodity.price?o("p",{staticStyle:{"font-size":"18px"}},[t._v(" Price: "),o("span",{staticStyle:{color:"red"}},[t._v(t._s(t.commodity.price))]),t._v("$ ")]):t._e()])])])])])])},s=[],a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-form",{staticClass:"demo-form-inline"},[o("el-form-item",{attrs:{label:"product name"}},[o("el-input",{attrs:{placeholder:"Please enter product name"},on:{blur:t.onblur},model:{value:t.coname,callback:function(e){t.coname=e},expression:"coname"}})],1),o("el-form-item",[o("el-button",{attrs:{type:"primary"},on:{click:t.upLoadImg}},[t._v("Upload product image")])],1),o("el-form-item",{attrs:{label:"Price"}},[o("el-input",{attrs:{type:"number"},on:{blur:t.priceBlur},model:{value:t.price,callback:function(e){t.price=t._n(e)},expression:"price"}})],1),o("el-form-item",{attrs:{label:"Title"}},[o("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"Please enter the title"},on:{blur:t.titleBlur},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1)],1),o("uplpadImg",{directives:[{name:"show",rawName:"v-show",value:t.uploadImgIsShow,expression:"uploadImgIsShow"}],ref:"uplpadImg"})],1)},l=[],n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-dialog",{attrs:{title:"Upload image",visible:t.isShow,width:"35%","before-close":t.handleClose},on:{"update:visible":function(e){t.isShow=e},open:t.open}},[o("div",{staticStyle:{"margin-left":"50px"}},[o("el-upload",{ref:"uploadRef",staticClass:"upload-demo",attrs:{drag:!0,headers:t.headers,"on-success":t.success,limit:1,action:"http://localhost:8080/imgUpload"}},[o("i",{staticClass:"el-icon-upload"}),o("div",{staticClass:"el-upload__text"},[t._v("Drag files here, or "),o("em",[t._v("click upload")])]),o("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("Only jpg/png files can be uploaded")])])],1)])],1)},c=[],r={data:function(){return{isShow:!1,type:0,headers:null}},mounted:function(){},methods:{init:function(t){this.isShow=!0,this.type=t},open:function(){var t={};t.token=sessionStorage.getItem("token"),t.uid=this.uid,this.headers=t},handleClose:function(t){this.$confirm("Confirm close?").then((function(){t()})).catch((function(){}))},success:function(t){if(200==t.code){this.$notify({title:"succeed",message:t.message,type:"success"});var e=this.$store.state.commod;console.log(this.$store.state),e.imgUrl=t.imgUrl,this.$store.commit("saveCommodity",e),this.$emit("updateImage"),this.isShow=!1,this.$refs.uploadRef.clearFiles()}else this.$notify.error({title:"error",message:t.message})}}},d=r,m=o("2877"),u=Object(m["a"])(d,n,c,!1,null,null,null),p=u.exports,h={components:{uplpadImg:p},data:function(){return{title:"",coname:"",uploadImgIsShow:!1,blogType:"",blogTypeData:null,price:""}},mounted:function(){this.$bus.$on("clearTileData",this.clearData)},methods:{upLoadImg:function(){this.$refs.uplpadImg.init(1),this.uploadImgIsShow=!0},onblur:function(){if(""!=this.coname){var t=this.$store.state.commod;console.log(t),t.coname=this.coname,this.$store.commit("saveCommodity",t)}},priceBlur:function(){if(""!=this.price){var t=this.$store.state.commod;console.log(t),t.price=this.price,this.$store.commit("saveCommodity",t)}},titleBlur:function(){if(""!=this.title){var t=this.$store.state.commod;if(this.title.length>50){var e=this.title.substring(0,50)+"...";t.jhtitle=e}else t.jhtitle=this.title;console.log(t),t.title=this.title,this.$store.commit("saveCommodity",t)}},clearData:function(){this.title="",this.coname="",this.price=""}}},f=h,g=Object(m["a"])(f,a,l,!1,null,null,null),y=g.exports,b=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[t._v(" Please add a paragraph: "),o("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"Please enter content"},model:{value:t.body,callback:function(e){t.body=e},expression:"body"}}),o("div",{staticClass:"btn"},[o("el-button",{attrs:{type:"primary",plain:""},on:{click:t.addBody}},[t._v("Add a description title")]),o("el-button",{attrs:{type:"primary",plain:""},on:{click:t.addBodyItem}},[t._v("Add paragraph")]),o("el-button",{attrs:{type:"primary",plain:""},on:{click:t.addBlog}},[t._v("Add product")])],1),o("uplpadImg",{directives:[{name:"show",rawName:"v-show",value:t.uploadImgIsShow,expression:"uploadImgIsShow"}],ref:"uplpadImg"})],1)},v=[],$=o("4ec3"),_={components:{uplpadImg:p},data:function(){return{body:"",uploadImgIsShow:!1}},methods:{addBody:function(){if(""!=this.body){var t=this.$store.state.commod,e="\n                          <p class='mstitle'>".concat(this.body,"</p>\n                          ");null==t.productDescription?(t.productDescription=e,this.$store.commit("saveCommodity",t)):(t.productDescription+=e,this.$store.commit("saveCommodity",t)),this.$emit("updateBody"),this.body=""}else this.$message.error("Please enter first before adding")},addBodyItem:function(){if(""!=this.body){console.log(11);var t=this.$store.state.commod,e="\n                          <p class='msbody'>".concat(this.body,"</p>\n                          ");null==t.productDescription?this.$message("Please add a description title first"):(t.productDescription+=e,this.$store.commit("saveCommodity",t),this.$emit("updateBody"),this.body="")}else this.$message.error("Please enter first before adding")},addBlog:function(){var t=this,e=this.$store.state.commod;null!=e.coname&&""!=e.coname?null!=e.title&&""!=e.title?null!=e.price&&0!=e.price?null!=e.productDescription&&""!=e.productDescription?null!=e.imgUrl&&""!=e.imgUrl?Object($["a"])("/api/commodity","post",e).then((function(e){201==e.code?(t.$message({message:"Product added successfully",type:"success"}),t.$store.commit("clearData"),t.$bus.$emit("clearTileData")):t.$message.error("Post failed! Please contact the administrator")})):this.$message.error("Product image cannot be empty"):this.$message.error("Product description cannot be empty"):this.$message.error("Product price cannot be empty"):this.$message.error("Product title cannot be empty"):this.$message.error("Product name cannot be empty")}},mounted:function(){var t=this;this.$refs.uplpadImg.$on("updateImage",(function(){console.log("Image upload callback"),t.$emit("updateBody")}))}},I=_,w=(o("ff47"),Object(m["a"])(I,b,v,!1,null,"29911848",null)),S=w.exports,x=o("a18c"),C={components:{blogtitle:y,blgSection:S},data:function(){return{commodity:{coname:null,price:null,title:null,productDescription:null,imgUrl:null}}},mounted:function(){var t=this;this.getVuexData(),this.$refs.blgSection.$on("updateBody",(function(){console.log("Callback to update data"),t.getVuexData()}))},methods:{beforeRouteEnter:function(t,e,o){document.title="Mall background",sessionStorage.getItem("admin"),o()},getVuexData:function(){this.commodity=this.$store.state.commod}},beforeRouteLeave:function(t,e,o){this.$store.commit("clearData"),o()},beforeRouteEnter:function(t,e,o){console.log("Enter"),null==sessionStorage.getItem("admin")&&x["a"].push("/home"),document.title="Mall background",o()}},D=C,k=(o("96a5"),Object(m["a"])(D,i,s,!1,null,null,null));e["default"]=k.exports},fb21:function(t,e,o){},ff47:function(t,e,o){"use strict";o("0c8c")}}]);
//# sourceMappingURL=chunk-6d9c2066.98d16af1.js.map